<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>é¸Ÿå®å¯„å…»æœåŠ¡é©¿ç«™</title>
    <link rel="stylesheet" href="./css/main.css">
    <style>
        .showtitle {
            width: 100%;
            margin: 0 auto;
            text-align: center;
            font-size: 29px;
            opacity: 0;
            font-family: "å¾®è½¯é›…é»‘ Light";
            letter-spacing: 3px;
            vertical-align: middle;
        }

        .card {
            width: 88vw;
            margin: 0 auto;
            border-radius: 20px;
            font-weight: 600;
            font-size: 18px;
            background: rgb(255 255 255 / 0%);
            border-top: 1px solid;
            border-bottom: 1px solid;
            padding-bottom: 16px;
            backdrop-filter: blur(10px);
            -webkit-backdrop-filter: blur(10px);
            box-shadow: inset 2px 2px 6px 2px rgb(255 255 255 / 20%), inset -2px -2px 4px -1px rgb(255 255 255 / 20%);
        }

        .method-option {
            display: flex;
            align-items: center;
        }

        .method-option input[type="radio"] {
            margin: 10px;
            appearance: none;
            width: 18px;
            height: 18px;
            border: 2px solid #ccc;
            border-radius: 50%;
            outline: none;
            cursor: pointer;
        }

        .method-option input[type="radio"]:checked {
            border: 2px solid #fff;
            background: #0099ff;
        }

        .qr-code-container {
            /* åˆå§‹é«˜åº¦ä¸º0 */
            height: 0;
            /* éšè—æº¢å‡ºå†…å®¹ */
            overflow: hidden;
            /* æ·»åŠ è¿‡æ¸¡æ•ˆæœ */
            transition: height 0.5s ease;
            text-align: center;
            margin-top: 20px;
        }

        .qr-code-container.active {
            height: 360px;
        }

        .qr-code {
            width: 200px;

            margin: 0 auto;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .progress.ro.dot {
            left: 47.6vw;
        }
    </style>
</head>

<body style="background-image: url(./img/bird.png);background-size: cover;">

    <div class="name" style="margin: 0;">


        <h2 style="color: #ff771e;font-weight: 600;">ğŸ¦œé¸Ÿå®å¯„å…»æœåŠ¡é©¿ç«™</h2>


        <div class="card">

            <p> <span style="color: #ffc812;display: block;text-align: center;font-size:12px">
                    â­æ”¯æŒå¯„å…»ä¸‹åˆ—å“ç§ï¼ˆé›é¸Ÿã€åŠæ¯›é™¤å¤–ï¼‰ï¼Œå¯å®Œå…¨éš”ç¦»ï¼Œä¸æ··å…»<BR>
                    â­å¯„å…»æ€»ä»·è¶…Â¥30å¯äº«ä¹æŠ˜ä¼˜æƒ ï¼Œæ€»ä»·è¶Šé«˜æŠ˜æ‰£è¶Šå¤§ï¼ˆèŠ‚æ—¥é™¤å¤–ï¼‰<BR>
                    â­360Â°æ™¯è§‚å¤§è§‚æ™¯æˆ¿å®è´ä½å¾—èˆ’å¿ƒï¼Œæä¾›æ¯æ—¥æ¢æ°´æ¢ç²®ç­‰æœåŠ¡<BR>
                    â­æ”¯æŒ24å°æ—¶å…¨å¤©ç›´æ’­ï¼Œè®©ä½ å‡ºå·®ä¹Ÿå¯éšæ—¶éšåœ°æŸ¥çœ‹é¸Ÿå®æƒ…å†µ
                </span> </p>

            <p onclick="tb()" style="cursor:pointer">å®šåˆ¶æ‚¨çš„å¯„å…»è®¡åˆ’</p>

            <section style="padding: 0 16px;">
                <p><strong>å¯„å…»å“ç§ï¼ˆå¯å¤šé€‰ï¼‰ï¼š</strong></p>

                <div class="bird-option">
                    <label>
                        <input type="checkbox" name="birdType" value="5" data-name="è™çš®" checked>
                        è™çš® (5å…ƒ/å¤©) æ•°é‡ï¼š
                    </label>
                    <input type="number" class="quantity-input" value="1" min="1" max="100">
                </div>

                <div class="bird-option">
                    <label>
                        <input type="checkbox" name="birdType" value="6" data-name="ç‰¡ä¸¹">
                        ç‰¡ä¸¹ (6å…ƒ/å¤©) æ•°é‡ï¼š
                    </label>
                    <input type="number" class="quantity-input" value="1" min="1" max="100" disabled>
                </div>

                <div class="bird-option">
                    <label>
                        <input type="checkbox" name="birdType" value="7" data-name="ç„å‡¤">
                        ç„å‡¤ (7å…ƒ/å¤©) æ•°é‡ï¼š
                    </label>
                    <input type="number" class="quantity-input" value="1" min="1" max="100" disabled>
                </div>

                <div class="bird-option">
                    <label>
                        <input type="checkbox" name="birdType" value="8" data-name="å’Œå°š">
                        å’Œå°š (8å…ƒ/å¤©) æ•°é‡ï¼š
                    </label>
                    <input type="number" class="quantity-input" value="1" min="1" max="100" disabled>
                </div>

                <p style="margin-top: 16px;"><strong>å¯„å…»èµ·æ­¢æ—¶é—´ï¼š</strong><br>
                    <input type="date" id="startDate" style="width: 102px;"> â€”
                    <input type="date" id="endDate" style="width: 102px;">
                </p>

                <p style="margin-top: 16px;color: #ffbb00;"><strong>æ€»ä»·ï¼šÂ¥<span id="totalCost">0.00</span></strong></p>
            </section>

            <p>é€‰æ‹©æ‚¨é€‚åˆçš„æ”¯ä»˜æ–¹å¼ï¼š</p>

            <div class="payment-method">


                <label class="method-option">
                    <input type="radio" name="payment" value="bank">

                    <img src="./img/z.png" width="22px">&nbsp;
                    æ”¯ä»˜å®ï¼ˆæ¨èï¼‰
                </label>

                <div class="qr-code-container" id="qrCode2">
                    <div class="qr-code">
                        <img src="./img/alipay.png" alt="æ”¯ä»˜å®æ”¯ä»˜äºŒç»´ç " width="222px">
                    </div>
                </div>

                <label class="method-option">
                    <input type="radio" name="payment" value="wechat">
                    <span class="method-icon">âœ…</span>&nbsp;
                    å¾®ä¿¡
                </label>

                <div class="qr-code-container" id="qrCode1">
                    <div class="qr-code">
                        <img src="./img/wx.png" alt="å¾®ä¿¡æ”¯ä»˜äºŒç»´ç " width="222px">
                    </div>
                </div>
            </div>

        </div>

    </div>


    <script>
        // å·¥å…·å‡½æ•°ï¼šæ ¼å¼åŒ–æ—¥æœŸä¸º YYYY-MM-DD
        function formatDate(date) {
            const y = date.getFullYear();
            const m = String(date.getMonth() + 1).padStart(2, '0');
            const d = String(date.getDate()).padStart(2, '0');
            return `${y}-${m}-${d}`;
        }

        // åˆå§‹åŒ–æ—¥æœŸé™åˆ¶
        function initDateInputs() {
            const today = new Date();
            const maxDate = new Date();
            maxDate.setDate(today.getDate() + 89); // æœ€å¤š90å¤©ï¼ˆå«å½“å¤©ï¼‰ï¼Œæ‰€ä»¥+89

            const startDateInput = document.getElementById('startDate');
            const endDateInput = document.getElementById('endDate');

            const todayStr = formatDate(today);
            const maxStr = formatDate(maxDate);

            startDateInput.min = todayStr;
            startDateInput.value = todayStr; // é»˜è®¤é€‰ä»Šå¤©

            endDateInput.min = todayStr;
            endDateInput.max = maxStr;

            // å½“ startDate æ”¹å˜æ—¶ï¼ŒåŠ¨æ€æ›´æ–° endDate çš„ min å’Œ max
            startDateInput.addEventListener('change', () => {
                const selectedStart = new Date(startDateInput.value);
                const newMin = new Date(selectedStart);
                const newMax = new Date(selectedStart);
                newMax.setDate(newMin.getDate() + 89); // æœ€å¤šå†åŠ 89å¤© â†’ æ€»å…±90å¤©

                endDateInput.min = formatDate(newMin);
                endDateInput.max = formatDate(newMax);

                // å¦‚æœå½“å‰ endDate è¶…å‡ºæ–°èŒƒå›´ï¼Œè‡ªåŠ¨ä¿®æ­£
                const currentEnd = new Date(endDateInput.value);
                if (endDateInput.value && (currentEnd < newMin || currentEnd > newMax)) {
                    endDateInput.value = formatDate(newMin); // é‡ç½®ä¸º startDate
                }

                calculateTotal();
            });

            endDateInput.addEventListener('change', calculateTotal);
        }

        // è®¡ç®—æ€»ä»·ï¼ˆå«æŠ˜æ‰£ï¼‰
        function calculateTotal() {
            const startDate = document.getElementById('startDate').value;
            const endDate = document.getElementById('endDate').value;

            if (!startDate || !endDate) {
                document.getElementById('totalCost').innerText = '0.00';
                return;
            }

            const start = new Date(startDate);
            const end = new Date(endDate);

            if (end < start) {
                document.getElementById('totalCost').innerText = '0.00';
                return;
            }

            const days = Math.floor((end - start) / (1000 * 60 * 60 * 24)) + 1;
            if (days > 90) {
                // ç†è®ºä¸Šä¸ä¼šè§¦å‘ï¼ˆå›  input é™åˆ¶ï¼‰ï¼Œä½†åŒé‡ä¿é™©
                document.getElementById('totalCost').innerText = '0.00';
                return;
            }

            let rawTotal = 0;
            const checkboxes = document.querySelectorAll('input[name="birdType"]');
            checkboxes.forEach(checkbox => {
                if (checkbox.checked) {
                    const pricePerDay = parseFloat(checkbox.value);
                    const quantityInput = checkbox.closest('.bird-option').querySelector('.quantity-input');
                    const quantity = parseInt(quantityInput.value) || 0;
                    if (quantity > 0) {
                        rawTotal += pricePerDay * quantity * days;
                    }
                }
            });

            // åº”ç”¨æŠ˜æ‰£
            let finalTotal = rawTotal;
            if (rawTotal >= 50) {
                finalTotal = rawTotal * 0.8;
            } else if (rawTotal > 30) {
                finalTotal = rawTotal * 0.9;
            }

            document.getElementById('totalCost').innerText = finalTotal.toFixed(2);
        }

        // é¡µé¢åŠ è½½å®Œæˆååˆå§‹åŒ–
        document.addEventListener('DOMContentLoaded', () => {
            // åˆå§‹åŒ–æ—¥æœŸ
            initDateInputs();

            const checkboxes = document.querySelectorAll('input[name="birdType"]');
            const quantityInputs = document.querySelectorAll('.quantity-input');

            // å“ç§å‹¾é€‰æ§åˆ¶æ•°é‡è¾“å…¥æ¡†å¯ç”¨/ç¦ç”¨
            checkboxes.forEach((checkbox, index) => {
                checkbox.addEventListener('change', function () {
                    quantityInputs[index].disabled = !this.checked;
                    calculateTotal();
                });
            });

            // æ•°é‡å˜åŒ–
            quantityInputs.forEach(input => {
                input.addEventListener('change', calculateTotal);
            });

            // æ”¯ä»˜æ–¹å¼åˆ‡æ¢ï¼ˆä¿ç•™åŸé€»è¾‘ï¼‰
            const radioButtons = document.querySelectorAll('input[name="payment"]');
            const qrCode1 = document.getElementById('qrCode1');
            const qrCode2 = document.getElementById('qrCode2');
            radioButtons.forEach(radio => {
                radio.addEventListener('change', function () {
                    if (this.value === 'wechat') {
                        qrCode1.classList.add('active');
                        qrCode2.classList.remove('active');
                    } else {
                        qrCode1.classList.remove('active');
                        qrCode2.classList.add('active');
                    }
                });
            });
        });

        // å…¶ä»–å‡½æ•°ï¼ˆå¦‚ jumpï¼‰ä¿ç•™
        function jump() {
            window.open("https://www.office.com");
        }
    </script>
</body>

</html>